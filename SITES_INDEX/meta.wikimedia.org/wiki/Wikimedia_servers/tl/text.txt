Wikimedia servers/tl - Meta
Wikimedia servers/tl
From Meta, a Wikimedia project coordination wiki
Jump to navigation
Jump to search
This page is a translated version of the page Wikimedia servers and the translation is 0% complete.Other languages:Bahasa Indonesia
Bân-lâm-gú
Deutsch
English
Esperanto
Tagalog
brezhoneg
dansk
español
français
magyar
português
português do Brasil
svenska
čeština
русский
українська
हिन्दी
বাংলা
മലയാളം
ไทย
ပအိုဝ်ႏဘာႏသာႏ
中文
日本語
한국어
Wikipedia and the other Wikimedia projects are run from server racks located in several data centres.
Contents
1 System architecture
1.1 Network topology
1.2 Software
2 Hosting
2.1 History
3 Status and monitoring
4 Energy use
5 See also
5.1 More hardware info
5.2 Admin logs
5.3 Offsite traffic pages
5.4 Long-term planning
6 Historical information
7 References
System architecture
Simplified overview of the MediaWiki software as deployed by Wikimedia Foundation (as of August 2022). Essentially a complex version of a LAMP "stack".
Network topology
The Wikimedia Foundation's network topology is described on the "Network design" page on Wikitech.
Software
Our DNS servers run gdnsd. We use geographical DNS to distribute requests between our five data centers (3x US, 1x Europe, 1x Asia) depending on the location of the client.
We use Linux Virtual Server (LVS) on commodity servers to load balance incoming requests. LVS is also used as an internal load balancer to distribute MediaWiki requests. For back end monitoring and failover, we have our own system called PyBal.
For regular MediaWiki web requests (articles/API) we use Varnish and Apache Traffic Server caching proxy servers in front of Apache HTTP Server.
All our servers run Debian GNU/Linux.
For distributed object storage we use Swift.
Our main web application is MediaWiki, which is written in PHP (~70 %) and JavaScript (~30 %).[1]
Our structured data is stored in MariaDB since 2013.[2] We group wikis into clusters, and each cluster is served by several MariaDB servers, replicated in a single-master configuration.
We use Memcached for caching of database query and computation results.
For full-text search we use Elasticsearch (Extension:CirrusSearch).
https://noc.wikimedia.org/ – Wikimedia configuration files.
Wikimedia server racks at CyrusOne
Hosting
See also: w:Wikimedia Foundation#Technology  and wikitech:Data centers
As of September 2022, we have the following colocation facilities (each name is derived from an acronym of the facility’s company and an acronym of a nearby airport):
eqiad
Application services (primary) at Equinix in Ashburn, Virginia (Washington, DC area).
codfw
Application services (secondary) at CyrusOne in Carrollton, Texas (Dallas-Fort Worth area).
esams
Caching at EvoSwitch in Amsterdam, the Netherlands.[3]
ulsfo
Caching at United Layer in San Francisco.
eqsin
Caching at Equinix in Singapore.
drmrs
Caching at Digital Realty in Marseille.
History
The backend web and database servers are in Ashburn, with Carrollton to handle emergency fallback in the future. Carrollton was chosen for this as a result of the 2013 Datacenter RfC. At EvoSwitch, we have a Varnish cache cluster and several miscellaneous servers. The Kennisnet location is now used only for network access and routing.
Ashburn (eqiad) became the primary data center in January 2013, taking over from Tampa (pmtpa and sdtpa) which had been the main data centre since 2004. Around April 2014, sdtpa (Equinix – formerly Switch and Data – in Tampa, Florida, provided networking for pmtpa) was shut down, followed by pmtpa (Hostway – formerly PowerMedium – in Tampa, Florida) in October 2014.
In the past we've had other caching locations like Seoul (yaseo, Yahoo!) and Paris (lopar, Lost Oasis); the WMF 2010–2015 strategic plan reach target states: "additional caching centers in key locations to manage increased traffic from Latin America, Asia and the Middle East, as well as to ensure reasonable and consistent load times no matter where a reader is located."
EvoSwitch and Kennisnet are recognised as benefactors for their in-kind donations. See the current list of benefactors.
A list of servers and their functions used to be available at the server roles page; no such list is currently maintained publicly (perhaps the private racktables tool has one). It used to be possible to see a compact table of all servers grouped by type on icinga, but this is no longer publicly available. However, the puppet configuration provides a pretty good reference for the software that each server runs.
B-roll of servers in Texas in 2015
Status and monitoring
You can check one of the following sites if you want to know if the Wikimedia servers are overloaded, or if you just want to see how they are doing.
https://www.wikimediastatus.net/
Grafana
Data center overview with total bandwidth, non-idle CPU and load per group of servers; versions also exist with a per-subcluster dropdown and total numbers without graphs (down in July 2019)
https://grafana.wikimedia.org/ should get you started
Icinga (private)
Networking latency
If you are seeing errors in real time, visit #wikimedia-techconnect on irc.libera.chat. Check the topic to see if someone is already looking into the problem you are having. If not, please report your problem to the channel. It would be helpful if you could report specific symptoms, including the exact text of any error messages, what you were doing right before the error, and what server(s) are generating the error, if you can tell.
Energy use
In 2017, the WMF board of trustees adopted a resolution containing a commitment to minimize the Foundation's overall environmental impact, especially around data centres through using green energy. The community-led Sustainability Initiative, created in 2015, aims at reducing the environmental impact of the servers by calling for renewable energy to power them.
The Wikimedia Foundation's servers are spread out in five colocation data centers in Virginia, Texas and San Francisco in the United States, Amsterdam and Marseille in Europe, and Singapore in Asia.
In 2021, the servers used 358.8 kW (kilowatts), summing up to about 3.143 GW h (gigawatt hours) of electrical energy per year. The total carbon footprint of the servers was 1,073 metric tons CO2-eq in 2021.[4]
Only the few servers in Amsterdam and in Marseille run on renewable energy, the other use different conventional energy mixes. In 2016, just 9% of Wikimedia Foundation data centers' energy came from renewable sources, with the rest split evenly between coal, gas and nuclear power (34%, 28%, and 28%, respectively). The bulk of the Wikimedia Foundation's electricity demand is in Virginia and Texas, which unfortunately have both very fossil fuel heavy grids.
Server name
Data center location
Provider
Date opened
Average energy consumption (kW)
Energy sources
Carbon footprint (CO2/year)
Renewable option and cost
eqiad
Ashburn, VA
20146-20149
USA
Equinix (Website)
February 2011
May 2016: 130
May 2015: 152
2016:  32% coal
20% natural gas
25% nuclear
17% renewable
1,040,000 lb = 520 short tons = 470 metric tons
= 0.32 * 130 kW * 8765.76 hr/yr * 2.1 lb CO2/kWh for coal
+ 0.20 * 130 kW * 8765.76 hr/yr * 1.22lb CO2/kWh for nat gas
+ 0.25 * 130 kW * 8765.76 hr/yr * 0 lb CO2/kWh for nuclear
+ 0.17 * 130 kW * 8765.76 hr/yr * 0 lb CO2/kWh for renewable
In 2015, Equinix made "a long-term commitment to use 100 percent clean and renewable energy". In 2017, Equinix renewed this pledge.
codfw
Carrollton, TX
75007
USA
CyrusOne (Website)
May 2014
May 2016: 77
May 2015: 70
2016:  23% coal
56% natural gas
6% nuclear
1% hydro/biomass/solar/other
14% wind (Oncor/Ercot)
790,000 lb = 400 short tons = 360 metric tons
= 0.23 * 77 kW * 8765.76 hr/yr * 2.1 lb CO2/kWh for coal
+ 0.56 * 77 kW * 8765.76 hr/yr * 1.22lb CO2/kWh for nat gas
+ 0.06 * 77 kW * 8765.76 hr/yr * 0 lb CO2/kWh for nuclear
+ 0.15 * 77 kW * 8765.76 hr/yr * 0 lb CO2/kWh for renewables
?
esams
Haarlem
2031 BE
Netherlands
EvoSwitch (Website)
December 2008
May 2016: < 10
May 2015: 10
"a combination of wind power, hydro and biomass"
0
n.a.
ulsfo
San Francisco, CA
94124
USA
UnitedLayer (Website)
June 2012
May 2016: < 5
May 2015: < 5
2016:  25% natural gas
23% nuclear
30% renewable
6% hydro
17% unspecified (PG&E)
13,000 lb = 6.7 short tons = 6.1 metric tons (+ unspecified)
= 0.00 * 5 kW * 8765.76 hr/yr * 2.1 lb CO2/kWh for coal
+ 0.25 * 5 kW * 8765.76 hr/yr * 1.22lb CO2/kWh for nat gas
+ 0.23 * 5 kW * 8765.76 hr/yr * 0 lb CO2/kWh for nuclear
+ 0.36 * 5 kW * 8765.76 hr/yr * 0 lb CO2/kWh for hydro/renewable
+ 0.17 * 5 kW * 8765.76 hr/yr * ? lb CO2/kWh for unspecified
?
eqsin
Singapore
Equinix (Website)
?
?
?
?
?
drmrs
Marseille
Digital Realty (Website)
?
?
?
?
?
See also
More hardware info
Technical FAQ – How about the hardware?
Your donations at work: new servers for Wikipedia, by Brion Vibber, 02-12-2009
wikitech:Clusters – technical and usually more up-to-date information on the Wikimedia clusters
Admin logs
Server admin log – Documents server changes (especially software changes)
Offsite traffic pages
Alexa traffic rank
Long-term planning
wikitech-l mailing list
wikitech.wikimedia.org
Historical information
Cache strategy (draft from 2006)
PHP caching and optimization (draft from 2007)
Hardware orders up to 2007
References
↑ See MediaWiki analysis, MediaWiki WMF-supported extensions analysis.
↑ "Wikipedia Adopts MariaDB" [Wikipedia Adopts MariaDB] (text/html). blog.wikimedia.org. Wikimedia Foundation, Inc. 2013-04-22. Retrieved 2014-07-20. 
↑ Suffered a major DoS attack on September 6/7, 2019. See dedicated article on WMF website.
↑ Wikimedia Foundation Environmental Sustainability (Carbon Footprint) Report for 2021
Retrieved from "https://meta.wikimedia.org/w/index.php?title=Wikimedia_servers/tl&oldid=25169575"
Categories: Wikimedia hardware/tlWikimedia servers administration/tl
Navigation menu
Personal tools
EnglishNot logged inTalkContributionsCreate accountLog in
Namespaces
Content pageDiscussion
Tagalog
Views
ReadTranslateView history
More
Search
Navigation
Main pageWikimedia NewsTranslationsRecent changesRandom pageHelpBabel
Community
Wikimedia Resource CenterWikimedia ForumMailing listsRequestsBabylonReportsResearchPlanet Wikimedia
Beyond the Web
Meet WikimediansEventsMovement affiliatesDonate
Tools
What links hereRelated changesSpecial pagesPermanent linkPage informationCite this page
Print/export
Create a bookDownload as PDFPrintable version
In other languages
Add links
 This page was last edited on 18 June 2023, at 12:45.
Text is available under the Creative Commons Attribution-ShareAlike License;
additional terms may apply.
See Terms of Use for details.
Privacy policy
About Meta
Disclaimers
Code of Conduct
Mobile view
Developers
Statistics
Cookie statement