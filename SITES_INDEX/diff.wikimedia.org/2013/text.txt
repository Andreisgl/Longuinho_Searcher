VipsScaler implementation by volunteer developer improves image handling on Wikimedia sites – Diff
 
Skip to content
 
Diff
Categories
Equity & Inclusion
Education & Open Access
Technology
Partnerships & Events
Policy & Advocacy
Movement Strategy
About
Submit
Calendar
Wikimania 2023
 
Choose a language
English
Search 
VipsScaler implementation by volunteer developer improves image handling on Wikimedia sites 
12 September 2013 by Donna Peterson 
Translate This Post
A depiction of the Battle of Belmont, Second Boer War. This image is an example of image reduction in VipsScaler. The original file has a resolution of 52 megapixels
Loading and resizing large images within Wikimedia projects has become faster and more reliable with the rollout of VipsScaler, a wraparound to the VIPS free image processing software. VIPS is a tool designed to use a small amount of memory when resizing images. This allows the wiki to create thumbnails of very large PNG files, something which previously was not possible because large amounts of memory would be required. And while Wikimedia Foundation technical staff rolled it out, a volunteer wrote the code.
The most common type of image file on the internet is a JPEG, but since its compression leads to deteriorated image quality with repeated editing, most Wikipedia and Wikimedia Commons non-photographic image files are stored in PNG formats, since it uses lossless compression. Until VipsScaler, thumbnails of PNG files larger than 50 megapixels could not be created.
Volunteer Bryan Tong Minh was a student at Delft University of Technology in 2008 when he initially wrote a utility capable of downscaling PNG images without using huge amounts of memory. Active on Wikimedia Commons at the time, Tong Minh (User:Bryan) said he “was annoyed by the fact that large PNGs did not have thumbnails because the image scaler that we used, ImageMagick, could not efficiently scale large non-JPEG images.”
During the review period of the utility, he became aware of VIPS, which allows for memory-efficient scaling of image files — more than just PNGs. He then set out to implement an extension that would allow usage of VIPS with MediaWiki, which became the VipsScaler extension.
“For many years, PNG files over a certain size could not be displayed on Wikipedia. They could be downloaded, but gave an error when thumbnailed and, on their file page, made it appear that the file was corrupt,” said Adam Cuerden, whose restoration work on Wikipedia since 2007 accounts for four percent of all featured pictures on English Wikipedia. Cuerden said it wasn’t uncommon for PNG files to be marked for deletion because they could not be displayed.
Currently, VIPS scales PNG images from 35 to 140 megapixels, according to Commons contributor Brian Wolff. He points to this 72 megapixel image below of Abraham Lincoln, restored by Adam Cuerden, as an example of an image that previously wouldn’t have been able to be rendered.
U.S. Presidential Candidate Abraham Lincoln (1860), lithograph by Leopold Grozelier. (Original resolution of 62 megapixels)
Wolff hopes eventually to be able to render TIFF images over 50 megapixels, as this is the format of many museum images. VipsScaler allows those museum large-size PNG files to be thumbnailed now.
“We originally planned deployment of VipsScaler in 2011,” said Tong Minh. “However, when testing the extension, it became apparent that the memory-scaling method that was the goal of implementing VipsScaler was not usable with PNGs. Fortunately by that time, the main developer of VIPS had become aware of our intentions to deploy VIPS on Wikimedia, and he implemented this efficient scaling method, which was the final obstacle to deployment of VIPS.”
A high resolution (83 megapixel) satellite photo of Corsica.
Initially from the Netherlands, Tong Minh said he first found Wikipedia and the Wikimedia Foundation while “looking up information on Wikipedia back in 2006.” He previously wrote the GlobalUsage extension, which allows users to see which projects a Commons image is in use on, and he has made what he describes as “major and minor contributions to the MediaWiki core.”
Tong Minh believes that the 50 megapixels area limit for TIFF images will eventually be removed once TIFF scaling is moved to VIPS as well. “That should be nice for Wiki Loves Monuments,” said Sumana Harihareswara, Engineering Community Manager at the Wikimedia Foundation. [1]. According to Harihareswara, there might be slight changes in visual quality and a few images might break.
Tong Minh said he hopes to have the opportunity to work on something “media related” in the future. As for the time it’s taken to reach deployment he wasn’t surprised. He said he recognizes that contributions are by volunteers and it can take “a lot of time to build up momentum. But when the momentum is there, eventually people are always very helpful in making the final push.”
(This effort could not have succeeded without the upstream efforts of John Cupitt, the VIPS developer who improved its scaling capabilities.)
Donna Peterson
Wikimedia Foundation Communications volunteer
Archive notice: This is an archived post from blog.wikimedia.org, which operated under different editorial and content guidelines than Diff.
 
Can you help us translate this article?
In order for this article to reach as many people as possible we would like your help. Can you translate this article to get the message out?
Start translation
Related
 
8 Comments                    
 Inline Feedbacks
View all comments
 

    Yannis A

    9 years ago
#20694
That painting is extremely misleading. In the Second Boer War, the British Army wore khaki and the Boer forces wore plain clothes.
0

    slowking

    9 years ago
#20695
give the man a grant. the 100Mb limit is gone, and when tiff’s are supported it will save upload duplication of effort. beautiful.
0

    Kelson

    9 years ago
#20696
This is really a great work!
Congratulations and thank you!
Hope to see such a powerful tool for TIFF files soon:
https://bugzilla.wikimedia.org/show_bug.cgi?id=52045
0

    Philip

    9 years ago
#20697
Nice tool, hope it is for all wiki holders?
0

    its great to see our VIPS library, which we started 23years ago is still useful due to its speedy design

    9 years ago
#20698
http://www.vips.ecs.soton.ac.uk
0

    bawolff

    9 years ago
#20699
Re philip: its being used on all wikimedia wikis. Non wikimedia wikis can also easily use it, but its not default, so some setup required.
0

    margers Muzis

    9 years ago
#20700
nice job !
0

    Donald

    8 years ago
#20701
Amazingly written this article. And I would to thanks Tong Minh for giving us wonderful thought about volunteers.
0
 
Meta
Posted in Technology, Wikimedia CommonsTagged VipsScaler, Wikimedia Blog (EN Archive) 
Related
 
Welcome to Diff
Welcome to Diff, a community blog by – and for – the Wikimedia movement. Join Diff today to share stories from your community and comment on articles. We want to hear your voice!
Learn more
Subscribe to Diff via Email
Enter your email address to subscribe to Diff and receive notifications of new posts by email.
Email Address
Subscribe
 
Upcoming Events
Sep
15
15 September @ 10:00 - 17 September @ 17:00  UTC  
Wikimedia CEE Meeting 2023
Organizer: 
Wikimedia Georgia
Oct
6
15:00 - 16:00  UTC  
Event Series
Let’s Connect Connectathon
Organizer: 
Let's Connect working group
Oct
20
20 October @ 03:30 - 22 October @ 10:30  UTC  
WikiWomenCamp 2023
Organizer: 
Chinmayee Mishra & Manavpreet Kaur
View Calendar
Wikimedia News
Wikimedia Foundation News
Wikimania 2023 in Singapore centers on diversity, collaboration, and the future of free knowledge10 August 2023 by Wikimedia Foundation
Wikimedia Technology Blog
Flame graphs arrive in WikimediaDebug8 June 2023 by Timo Tijhof
Down the Rabbit Hole
Wikipedia’s value in the age of generative AI12 July 2023 by Selena Deckelmann
 
Diff This is Diff, a Wikimedia community blog.
All participants are responsible for building a place that is welcoming and friendly to everyone. Learn more about Diff.
A Wikimedia Foundation Project
Links 
Join
Subscribe
Guidelines
Editorial guidelines
Privacy Policy
Terms of Use
Log in
Content licensed under Creative Commons Attribution-ShareAlike 4.0 (CC-BY-SA) unless otherwise noted.
Powered by WordPress.com VIP, Automattic Privacy Notice. 
wpDiscuzInsert 
  Report this comment
This comment is spam 
This comment is a violation of the Code of Conduct 
Other 
Send
You are going to send email to SendMove CommentMove