API:Etiquette - MediaWiki
Jump to content
Main menu
Main menu
move to sidebar
hide
Navigation
Main pageGet MediaWikiGet extensionsTech blogContribute
Support
User helpFAQTechnical manualSupport deskCommunication
Development
Developer portalCode statistics
MediaWiki.org
Community portalRecent changesTranslate contentRandom pageVillage pumpSandbox
In other languages
Add links
Search
Search
 EnglishCreate accountLog in
Personal tools
 Create account Log in
Pages for logged out editors learn more
ContributionsTalk
Contents
move to sidebar
hide
Beginning
1Behavior
Toggle Behavior subsection
1.1Request limit
1.2Parsing of revisions
1.3The maxlag parameter
1.4The User-Agent header
1.5Data formats
2Performance
3Other notes
4See also
Toggle the table of contents
Toggle the table of contents
API:Etiquette
APIDiscussion
English
ReadView sourceView history
Tools
Tools
move to sidebar
hide
Actions
ReadView sourceView history
General
What links hereRelated changesUpload fileSpecial pagesPermanent linkPage informationCite this page
Print/export
Create a bookDownload as PDFPrintable version
From mediawiki.org
Translate this pageLanguages:British English
Deutsch
Deutsch (Sie-Form)
English
Türkçe
español
français
italiano
polski
português
português do Brasil
русский
українська
ไทย
中文
日本語
This page is part of the MediaWiki Action API documentation.
MediaWiki Action API 
Basics
Etiquette and usage guidelines 
All Query modules 
Get properties of pages 
List pages matching a criterion 
Get module parameters information 
Get meta information about the wiki and user 
Authentication
Get tokens for data modifying operations 
Login 
Logout 
Accounts and Users
Create an account 
Block or unblock a user 
Get info about the current user 
Get the current user's watchlist as a feed 
Change user options 
Change user group membership 
Send an email 
Page Operations
Create and edit a page 
Get the contents of a page 
Upload a file 
Import a page 
Delete a page 
Parse content of a page 
Watch or unwatch a page 
Purge cache for page(s) 
Rollback a page 
Move a page 
Patrol a page or revision 
Restore revisions of a deleted page 
Change a page's protection level 
Change a page's language 
More... 
Search
Search wiki pages by title (OpenSearch) 
Advanced search for wiki pages by title or text 
Search wiki pages near a location 
Search for a language name 
Perform a prefix search for page titles 
Developer Utilities
Access libraries 
Cross-site requests 
Creating an API module in an extension 
Using the API in MediaWiki and extensions 
Restricting API usage 
Localisation 
Implementation Strategy 
Tutorials
Action API Tutorial 
Article ideas generator 
Nearby places viewer 
Picture of the day viewer 
Holidays viewer 
v · d · e
This page in a nutshell:
Set an informative User-Agent string with contact information, or you may be IP-blocked without notice. See the User-Agent policy for more details.
Make your requests in series rather than in parallel, by waiting for one request to finish before sending a new request.
Perform grouped updates via one single editEntity, for all languages and for labels, descriptions, and aliases at once.
On Wikimedia wikis, there may be faster ways to get bulk data. See m:Research:Data and wikitech:Portal:Data Services for more details.
This page contains the best practices that should be followed when using the API.
Behavior
Request limit
There is no hard speed limit on read requests, but be considerate and try not to take a site down.
Most system administrators reserve the right to unceremoniously block you if you do endanger the stability of their site.
Making your requests in series rather than in parallel, by waiting for one request to finish before sending a new request, should result in a safe request rate.
It is also recommended that you ask for multiple items in one request by:
Using the pipe character (|) whenever possible e.g. titles=PageA|PageB|PageC, instead of making a new request for each title.
Using a generator  instead of making a request for each result from another request.
Use GZip compression when making API calls by setting Accept-Encoding: gzip to reduce bandwidth usage.
Requests which make edits, modify state or otherwise are not read-only requests, are subject to rate limiting. The exact rate limit being applied might depend on the type of action, your user rights and the configuration of the website you are making the request to.
The limits that apply to you can be determined by accessing the action=query&meta=userinfo&uiprop=ratelimits API endpoint.
api.php?action=query&format=json&meta=userinfo&uiprop=ratelimits [try in ApiSandbox]
When you hit the request rate limit you will receive a API error response  with the error code ratelimited. When you encounter this error, you may retry that request, however you should increase the time between subsequent requests. A common strategy for this is Exponential backoff.
Parsing of revisions
While it is possible to query for results from a specific revision number using the revid parameter, this is an expensive operation for the servers.
To retrieve a specific revision use the oldid parameter. For example:
api.php?action=parse&format=json&prop=images&oldid=254862759 [try in ApiSandbox]
The maxlag parameter
If your task is not interactive, i.e. a user is not waiting for the result, you should use the maxlag parameter.
The value of the maxlag parameter should be an integer number of seconds.
For example:
api.php?action=query&format=json&titles=Main%20Page&maxlag=1 [try in ApiSandbox]
This will prevent your task from running when the load on the servers is high.
Higher values mean more aggressive behavior, lower values are nicer.
See Manual:Maxlag parameter  for more details.
The User-Agent header
It is best practice to set a descriptive User Agent header.
To do so, use User-Agent: clientname/version (contact information e.g. username, email) framework/version....
For example in PHP:
ini_set('user_agent', 'MyCoolTool/1.1 (https://example.org/MyCoolTool/; MyCoolTool@example.org) UsedBaseLibrary/1.4');
Do not simply copy the user-agent of a popular web browser.
This ensures that if a problem does arise it is easy to track down where it originates.
If you are calling the API from browser-based JavaScript, you may not be able to influence the User-Agent header, depending on the browser.
To work around this, use the Api-User-Agent header.
See m:User-Agent_policy for more details.
Data formats
All new API users should use JSON .
See API:Data formats  for more details.
Performance
Downloading data in bulk is not always extremely efficient using the Action API.
On Wikimedia wikis, there are faster ways to get data in bulk, see m:Research:Data and wikitech:Portal:Data Services for more details.
Other notes
If your requests obtain data that can be cached for a while, you should take steps to cache it, so you don't request the same data over and over again.
Some clients may be able to cache data themselves, but for others (particularly JavaScript clients), this is not possible.
Whenever you're reading data from the web service API, you should try to use use GET requests if possible, not POST, as the latter are not cacheable.
See also
API:Main page  - The quick start guide.
This page or project is maintained by Core Platform Team .
Get help:
 #mediawiki-core connect ← Live chat (IRC)
API talk:Etiquette ← Talk page 
 mediawiki-api (add task) ← Phabricator  project page
Retrieved from "https://www.mediawiki.org/w/index.php?title=API:Etiquette&oldid=6052688"
Category: MediaWiki action API
 This page was last edited on 1 August 2023, at 12:18.
Text is available under the Creative Commons Attribution-ShareAlike License;
additional terms may apply.
See Terms of Use for details.
Privacy policy
About MediaWiki.org
Disclaimers
Code of Conduct
Mobile view
Developers
Statistics
Cookie statement
Toggle limited content width